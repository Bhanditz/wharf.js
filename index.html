<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <script src="jszip.min.js"></script>
    <script src="bridge.js"></script>
    <script src="butlerweb.js"></script>
    <script>
    'use strict'

    var onContainer = function (container) {
      console.log("Container = ", container.entries)
      var firstEntry = container.entries[0]
      firstEntry.read().then(function (data) {
        console.log("first entry: ", firstEntry.path, firstEntry.size, data, data.byteLength)
      })
    }

    document.addEventListener("DOMContentLoaded", function () {
      var fileinputs = document.querySelectorAll(".file-input")
      for (var i = 0; i < fileinputs.length; i++) {
        var fileinput = fileinputs[i]
        window.Uppa(fileinput, onContainer)
      }
    })
    </script>
    <style>
    textarea {
      display: block;
      margin: 1em 0;
      width: 800px;
      height: 640px;
    }
    </style>
  </head>
  <body>
    <h1>Butler web!</h1>
    <div class="upload-target">
      <h2>Upload a .zip file</h2>
      <input class="file-input" type="file">
    </div>
    <div class="upload-target">
      <h2>...or a directory (Chrome, Firefox Nightly and Edge only)</h2>
      <input class="file-input" type="file" webkitdirectory directory>
    </div>
    <textarea></textarea>
  </body>
</html>
